
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>utils package &#8212; Python Flight Data Processing 0.1 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="tests package" href="tests.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tests.html" title="tests package"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Python Flight Data Processing 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" accesskey="U">src</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="utils-package">
<h1>utils package<a class="headerlink" href="#utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-utils.calibrator">
<span id="utils-calibrator-module"></span><h2>utils.calibrator module<a class="headerlink" href="#module-utils.calibrator" title="Permalink to this headline">¶</a></h2>
<p>Created on Jul 12, 2017</p>
<p>Thermometry conversion class using demodRaw values from TRead messages. It emulates the Calibrator <cite>java class at gov.nasa.gsfc.aurora.common.piperthermometry</cite></p>
<p>&#64;author: bettii</p>
<dl class="class">
<dt id="utils.calibrator.Calibrator">
<em class="property">class </em><code class="descclassname">utils.calibrator.</code><code class="descname">Calibrator</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.calibrator.Calibrator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>classdocs</p>
<dl class="method">
<dt id="utils.calibrator.Calibrator.getRes">
<code class="descname">getRes</code><span class="sig-paren">(</span><em>raw</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.calibrator.Calibrator.getRes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="utils.calibrator.Calibrator.getTemperature">
<code class="descname">getTemperature</code><span class="sig-paren">(</span><em>res</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.calibrator.Calibrator.getTemperature" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-utils.config">
<span id="utils-config-module"></span><h2>utils.config module<a class="headerlink" href="#module-utils.config" title="Permalink to this headline">¶</a></h2>
<p>Module that configures the <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> module.
It also contains some common variables that are useful for the scripts:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">save_folder</span></code> folder where the txt and pickle files can be saved</li>
<li><code class="docutils literal"><span class="pre">img_folder</span></code> folder where the figures can be saved</li>
<li><code class="docutils literal"><span class="pre">flightDisksFolders</span></code> List of Aurora archive folders (full path) where there is the SSDs information.</li>
<li><code class="docutils literal"><span class="pre">flightTelemetryFolders</span></code> List of Aurora archive folders (full path) where there is the information from the telemetry (Rubble).”</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="module-utils.dataset">
<span id="utils-dataset-module"></span><h2>utils.dataset module<a class="headerlink" href="#module-utils.dataset" title="Permalink to this headline">¶</a></h2>
<p>Conatins useful functions to read and plot the fields archived by Aurora.
The DataSet class reads and creates a <code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code> object containing the desired fields.</p>
<p>&#64;author: Marc Casalprim</p>
<dl class="class">
<dt id="utils.dataset.DataSet">
<em class="property">class </em><code class="descclassname">utils.dataset.</code><code class="descname">DataSet</code><span class="sig-paren">(</span><em>folder=None</em>, <em>freq=400.0</em>, <em>min=None</em>, <em>max=None</em>, <em>folder_export=None</em>, <em>nValues=None</em>, <em>start=None</em>, <em>verbose=False</em>, <em>rpeaks=False</em>, <em>estimator=False</em>, <em>starcam=False</em>, <em>fieldsList=[]</em>, <em>foldersList=[]</em>, <em>droplist=[]</em>, <em>timeIndex=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.DataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>Class containing useful methods to read and generate a pandas dataframe containing the desired fields.
Derived from Maxime’s original codes. The dataframe is stored as the attribute df.</p>
<dl class="method">
<dt id="utils.dataset.DataSet.readField">
<code class="descname">readField</code><span class="sig-paren">(</span><em>field</em>, <em>folder=None</em>, <em>rpeaks=True</em>, <em>verbose=False</em>, <em>nValues=None</em>, <em>start=None</em>, <em>timeIndex=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.DataSet.readField" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a single field and updates the dataframe <cite>df</cite> accordingly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>field</strong> – a <a class="reference internal" href="#utils.field.Field" title="utils.field.Field"><code class="xref py py-class docutils literal"><span class="pre">Field</span></code></a> object to read</li>
<li><strong>folder</strong> – folder where the fileds are located (if None, uses self.folder)</li>
<li><strong>rpeaks</strong> – remove peaks? (where all the values are zero)</li>
<li><strong>verbose</strong> – print progress?</li>
<li><strong>nValues</strong> – number of values to read</li>
<li><strong>start</strong> – where to start reading the files</li>
<li><strong>timeIndex</strong> – index by time? (derived from the folder name)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.dataset.DataSet.readListFields">
<code class="descname">readListFields</code><span class="sig-paren">(</span><em>fieldsList</em>, <em>folder=None</em>, <em>rpeaks=True</em>, <em>verbose=False</em>, <em>nValues=None</em>, <em>start=None</em>, <em>timeIndex=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.DataSet.readListFields" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a list of fields and stores the new fields in the df attribute</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fieldsList</strong> – list of utils.field.Field objects</li>
<li><strong>folder</strong> – folder where the fields are located</li>
<li><strong>rpeaks</strong> – remove peaks? (where all the values are zero)</li>
<li><strong>verbose</strong> – print progress?</li>
<li><strong>nValues</strong> – number of values to read</li>
<li><strong>start</strong> – where to start reading the files</li>
<li><strong>timeIndex</strong> – index by time? (derived from the folder name)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.dataset.DataSet.readMultipleFolders">
<code class="descname">readMultipleFolders</code><span class="sig-paren">(</span><em>fieldsList</em>, <em>foldersList</em>, <em>rpeaks=False</em>, <em>verbose=False</em>, <em>timeIndex=True</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.DataSet.readMultipleFolders" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores in self.df a new <code class="xref py py-class docutils literal"><span class="pre">DataFrame</span></code> object containing
the <code class="docutils literal"><span class="pre">fieldsList</span></code> information from all the folders in <code class="docutils literal"><span class="pre">foldersList</span></code>.
The indexing of the <code class="xref py py-class docutils literal"><span class="pre">DataFrame</span></code> is a <code class="docutils literal"><span class="pre">DatetimeIndex</span></code> by default
(<code class="docutils literal"><span class="pre">timeIndex=True</span></code>), using the date and time of the folder name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fieldsList</strong> – list of <a class="reference internal" href="#utils.field.Field" title="utils.field.Field"><code class="xref py py-class docutils literal"><span class="pre">Field</span></code></a> objects</li>
<li><strong>foldersList</strong> – list of folders where the fields are located</li>
<li><strong>rpeaks</strong> – remove peaks? (where all the values are zero)</li>
<li><strong>verbose</strong> – print progress?</li>
<li><strong>timeIndex</strong> – index by time? (derived from the folder name)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="utils.dataset.extractDuplicates">
<code class="descclassname">utils.dataset.</code><code class="descname">extractDuplicates</code><span class="sig-paren">(</span><em>df</em>, <em>th=0.001</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.extractDuplicates" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes rows where there are duplicates of the quaternions at the first column of the dataframe df</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – a pd.DataFrame object</li>
<li><strong>th</strong> – tolerance of the difference in degrees between the RA coordinates of the duplicate quaternions (default 1e-3)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the df with the duplicates removed</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.extractGyrosAndStarcam">
<code class="descclassname">utils.dataset.</code><code class="descname">extractGyrosAndStarcam</code><span class="sig-paren">(</span><em>dataframe, labels_gyros=['gyroX', 'gyroY', 'gyroZ'], label_triggers='triggers', labels_scerrors=['ra_err', 'dec_err', 'roll_err']</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.extractGyrosAndStarcam" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns three dataframes with the Groscopes, Starcamera and Estimator data respectively.
Synchronizes the Starcamera with the triggers. Useful for the Estimator classes.</p>
<p>The dataframe must contain, at least, the following columns: [‘qI2G’, ‘qI2S’,’dec_sc’, ‘ra_sc’, ‘roll_sc’,’qi’, ‘qj’, ‘qk’, ‘qr’,’gyroX’, ‘gyroY’, ‘gyroZ’,’biasX’,’biasY’,’biasZ’,’P00’,’P01’,’P02’,’P10’,’P11’,’P12’,’P20’,’P21’,’P22’]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dataframe</strong> – a <code class="xref py py-class docutils literal"><span class="pre">DataFrame</span></code> object containing all the infromation to extract</li>
<li><strong>labels_gyros</strong> – columns of the dataframe that contain the gyroscopes information</li>
<li><strong>label_triggers</strong> – column of the dataframe that contains the triggers information</li>
<li><strong>labels_scerrors</strong> – columns of the dataframe that contain the star camera uncertainties information</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">gyros,sc,est: dataframes with the gyroscopes, star camera and estimator data respectively.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">( <code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code>, <code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code>, <code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code> )</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.extractPs">
<code class="descclassname">utils.dataset.</code><code class="descname">extractPs</code><span class="sig-paren">(</span><em>dataframe</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.extractPs" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a 3x3 covariance matrix from the columns [‘P00’,’P01’,’P02’,’P10’,’P11’,’P12’,’P20’,’P21’,’P22’] of the <code class="docutils literal"><span class="pre">dataframe</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>dataframe</strong> – a <code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code> object with at least the 9 columns listed</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">3x3 <code class="xref py py-class docutils literal"><span class="pre">ndarray</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.filterArray">
<code class="descclassname">utils.dataset.</code><code class="descname">filterArray</code><span class="sig-paren">(</span><em>x</em>, <em>N=200</em>, <em>R=0.9</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.filterArray" title="Permalink to this definition">¶</a></dt>
<dd><p>Smoothes peaks of the <cite>ndarray</cite> x.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>x</strong> – <cite>ndarray</cite> to filter</li>
<li><strong>N</strong> – width of the peaks to remove</li>
<li><strong>R</strong> – overlapping ratio of the gliding window [0,1]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a filtered <cite>ndarray</cite> with the same dimensions as x</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>ndarray</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.filterDataframe">
<code class="descclassname">utils.dataset.</code><code class="descname">filterDataframe</code><span class="sig-paren">(</span><em>df</em>, <em>N=3</em>, <em>R=0.9</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.filterDataframe" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes peaks from the dataframe df. It uses filterArray(df[column].values, N, R)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – a pd.DataFrame object</li>
<li><strong>N</strong> – width of the peaks to remove</li>
<li><strong>R</strong> – overlapping ratio of the gliding window [0,1]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the df filtered, of the same size</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.filterQuats">
<code class="descclassname">utils.dataset.</code><code class="descname">filterQuats</code><span class="sig-paren">(</span><em>df</em>, <em>onlyQuats=True</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.filterQuats" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters peaks of the dataframe df with quaternions. It uses filterArray(df[column].values, N=3, R=0.9)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – a pd.DataFrame object</li>
<li><strong>onlyQuats</strong> – filter only the columns with quaternions? (if False it has the same effect as filterDataframe(df))</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">the df filtered, of the same size</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">pd.DataFrame</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.genQuaternions">
<code class="descclassname">utils.dataset.</code><code class="descname">genQuaternions</code><span class="sig-paren">(</span><em>dataframe, quats={'qI2S': ['ra_sc', 'dec_sc', 'roll_sc'], 'qest': ['qi', 'qj', 'qk', 'qr'], 'qI2G': ['qi_sc', 'qj_sc', 'qk_sc', 'qr_sc']}, norm=False, filter=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.genQuaternions" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a dictionary of lists of <a class="reference internal" href="#utils.quat.Quat" title="utils.quat.Quat"><code class="xref py py-class docutils literal"><span class="pre">Quat</span></code></a> objects using the columns of the dataframe defined by the quats dictionary values.
The returned dictionary will have the same keys as <code class="docutils literal"><span class="pre">quats</span></code></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dataframe</strong> – <code class="xref py py-class docutils literal"><span class="pre">pandas.DataFrame</span></code> object</li>
<li><strong>quats</strong> – dictionary defining the columns to read that will be passed to the <a class="reference internal" href="#utils.quat.Quat" title="utils.quat.Quat"><code class="xref py py-class docutils literal"><span class="pre">Quat</span></code></a> constructor</li>
<li><strong>norm</strong> – normalize quaternion?</li>
<li><strong>filter</strong> – filter the quaternions?</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">dictionary of <a class="reference internal" href="#utils.quat.Quat" title="utils.quat.Quat"><code class="xref py py-class docutils literal"><span class="pre">Quat</span></code></a> lists, keyed by the keys of <code class="docutils literal"><span class="pre">quats</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.load_fields">
<code class="descclassname">utils.dataset.</code><code class="descname">load_fields</code><span class="sig-paren">(</span><em>fieldsList</em>, <em>folder=None</em>, <em>nValues=None</em>, <em>start=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.load_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the fields in fieldsList that are in the folder</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fieldsList</strong> – list of utisl.field.Field to read</li>
<li><strong>folder</strong> – folder where the fields will be read</li>
<li><strong>nValues</strong> – number of values we want to read (if None, all of them)</li>
<li><strong>start</strong> – value from where we start counting nValues (if None, starting from the end of file)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">dictionary of <code class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></code> objects keyed by the field’s label</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>dict</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.load_single_field">
<code class="descclassname">utils.dataset.</code><code class="descname">load_single_field</code><span class="sig-paren">(</span><em>filename</em>, <em>datatype</em>, <em>nValues=None</em>, <em>start=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.load_single_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads a binary file. It uses the <code class="xref py py-mod docutils literal"><span class="pre">numpy.fromfile</span></code> function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – complete filename of the field to read</li>
<li><strong>datatype</strong> – data type of the binary file (eg. int32 -&gt; ‘i4’)</li>
<li><strong>nValues</strong> – number of values we want to read (if None, all of them)</li>
<li><strong>start</strong> – value from where we start counting nValues (if None, starting from the end of file)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">values of the field</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><cite>ndarray</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.plotColumns">
<code class="descclassname">utils.dataset.</code><code class="descname">plotColumns</code><span class="sig-paren">(</span><em>df</em>, <em>units=''</em>, <em>xlabel='Index'</em>, <em>ylabels=None</em>, <em>ncols=1</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.plotColumns" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot all the columns of the <code class="xref py py-class docutils literal"><span class="pre">DataFrame</span></code> object <code class="docutils literal"><span class="pre">df</span></code> in a subplots layout with <code class="docutils literal"><span class="pre">ncols</span></code> columns</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – a <code class="xref py py-class docutils literal"><span class="pre">DataFrame</span></code> object</li>
<li><strong>units</strong> – string to add at the end of the ylabels</li>
<li><strong>xlabel</strong> – label of the x axis</li>
<li><strong>ylabels</strong> – labels of the y axis (if None, ylabels=df.columns)</li>
<li><strong>ncols</strong> – number of columns of the subplots layout</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.plotCovs">
<code class="descclassname">utils.dataset.</code><code class="descname">plotCovs</code><span class="sig-paren">(</span><em>df, time_label='Palestine Time', ylabels=None, labels=None, styles=['b', 'r', 'g', 'k'], legend=False, xlim=None, function=&lt;function &lt;lambda&gt;&gt;, rotate=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.plotCovs" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the first three diagonal elements of the matrices in the dataframe df in a 3x1 subplots layout (P11,P22,P33)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – a pd.Dataframe containing exclusively columns of np.matrix objects greater than 3x3</li>
<li><strong>time_label</strong> – label of the x axis</li>
<li><strong>ylabels</strong> – y axis labels of the three subplots, in order top-bottom</li>
<li><strong>labels</strong> – legend labels of every column (if None, use df.columns as labels)</li>
<li><strong>styles</strong> – plot styles or kwargs of every column</li>
<li><strong>legend</strong> – show legend?</li>
<li><strong>xlim</strong> – limits of the x axis [xmin,xmax]</li>
<li><strong>function</strong> – function to be passed at every diagonal element</li>
<li><strong>rotate</strong> – rotate the covariance matrix -46 degrees? (represent in SC reference frame)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.plotInnovations">
<code class="descclassname">utils.dataset.</code><code class="descname">plotInnovations</code><span class="sig-paren">(</span><em>ests, sc, time_label='Palestine Time', units='arcsec', conv=&lt;function &lt;lambda&gt;&gt;, labels=None, styles=['b', 'r', 'g', 'k'], legend=False, xlim=None, sync=False, rotation=True</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.plotInnovations" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the errors between the estimated attitudes in the list of dataframes ests and the star camera solutions in the dataframe sc</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ests</strong> – list of pd.Dataframe containing a qest column</li>
<li><strong>sc</strong> – pd.Dataframe containing the star camera information (qI2G column)</li>
<li><strong>time_label</strong> – label of the x axis</li>
<li><strong>units</strong> – string describing the units of the values</li>
<li><strong>conv</strong> – function to be passed at every error</li>
<li><strong>labels</strong> – legend labels of every pd.Dataframe in ests (if None, the labels are the position in the ests list)</li>
<li><strong>styles</strong> – plot styles or kwargs of every pd.Dataframe in ests</li>
<li><strong>legend</strong> – show legend?</li>
<li><strong>xlim</strong> – limits of the x axis [xmin,xmax]</li>
<li><strong>sync</strong> – plot synchronized with time?</li>
<li><strong>rotation</strong> – compute the errors in the SC reference frame?</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.plotQuaternions">
<code class="descclassname">utils.dataset.</code><code class="descname">plotQuaternions</code><span class="sig-paren">(</span><em>df, time_label='Palestine Time', labels=None, styles=['b', 'r', 'g', 'k'], legend=False, xlim=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.plotQuaternions" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot the quaternions of the pd.Dataframe df in a 3x1 subplots layout (RA,DEC,ROLL)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>df</strong> – a pd.Dataframe containing exclusively utils.quat.Quat objects</li>
<li><strong>time_label</strong> – label of the x axis</li>
<li><strong>labels</strong> – legend labels of every column (if None, use df.columns as labels)</li>
<li><strong>styles</strong> – plot styles or kwargs of every column</li>
<li><strong>legend</strong> – show legend?</li>
<li><strong>xlim</strong> – limits of the x axis [xmin,xmax]</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><code class="xref py py-class docutils literal"><span class="pre">matplotlib.figure.Figure</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.dataset.toTimeIndex">
<code class="descclassname">utils.dataset.</code><code class="descname">toTimeIndex</code><span class="sig-paren">(</span><em>dataframe</em>, <em>folder</em>, <em>freq=400.0</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.dataset.toTimeIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the same dataframe but with the indices in DateTime format.
The input <code class="docutils literal"><span class="pre">dataframe</span></code> must have mceFrameNumber indices.
The time in the folder is considered as the starting time for the first mce frame number.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>dataframe</strong> – a <code class="xref py py-class docutils literal"><span class="pre">DataFrame</span></code> object</li>
<li><strong>folder</strong> – folder name</li>
<li><strong>freq</strong> – frequency of the index (default 400 Hz)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a dataframe with <code class="docutils literal"><span class="pre">DateTime</span></code> indices</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-utils.detector">
<span id="utils-detector-module"></span><h2>utils.detector module<a class="headerlink" href="#module-utils.detector" title="Permalink to this headline">¶</a></h2>
<p>Created on Jun 5, 2017</p>
<p>Useful functions to handle the FIR detectors information.</p>
<p>&#64;author: Marc Casalprim</p>
<dl class="function">
<dt id="utils.detector.createDataAxes">
<code class="descclassname">utils.detector.</code><code class="descname">createDataAxes</code><span class="sig-paren">(</span><em>title='', dets=[0, 1, 2, 3]</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.createDataAxes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.detector.createImagesAxes">
<code class="descclassname">utils.detector.</code><code class="descname">createImagesAxes</code><span class="sig-paren">(</span><em>title=''</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.createImagesAxes" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.detector.data2matrices">
<code class="descclassname">utils.detector.</code><code class="descname">data2matrices</code><span class="sig-paren">(</span><em>data</em>, <em>index=None</em>, <em>center=True</em>, <em>dead=[]</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.data2matrices" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the fields in data to 4 3D matrices 
representing the detector images evolution in time</p>
</dd></dl>

<dl class="function">
<dt id="utils.detector.dataframe2matrices">
<code class="descclassname">utils.detector.</code><code class="descname">dataframe2matrices</code><span class="sig-paren">(</span><em>dataframe</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.dataframe2matrices" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the fields in dataframe to 4 3D matrices 
representing the detector images evolution in time</p>
</dd></dl>

<dl class="function">
<dt id="utils.detector.generateDictMap">
<code class="descclassname">utils.detector.</code><code class="descname">generateDictMap</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.generateDictMap" title="Permalink to this definition">¶</a></dt>
<dd><p>Associates every field to a detector pixel and generates a dictionary <code class="docutils literal"><span class="pre">dictMap</span></code> of the mapping, keyed by the field name.
Each entry of the dictionary has 3-tuple describing the (row,column,detectorId)</p>
</dd></dl>

<dl class="function">
<dt id="utils.detector.getDeadPixels">
<code class="descclassname">utils.detector.</code><code class="descname">getDeadPixels</code><span class="sig-paren">(</span><em>filename='dead_pixels.txt'</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.getDeadPixels" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.detector.getFFTs">
<code class="descclassname">utils.detector.</code><code class="descname">getFFTs</code><span class="sig-paren">(</span><em>matrix</em>, <em>sindex=0</em>, <em>eindex=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.getFFTs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the first half of the FFT of the matrices inside the dictionary <code class="docutils literal"><span class="pre">matrix</span></code>.
It assumes the time is in the 3rd dimension.
:rtype: dict</p>
</dd></dl>

<dl class="function">
<dt id="utils.detector.getIndexRangeLastStroke">
<code class="descclassname">utils.detector.</code><code class="descname">getIndexRangeLastStroke</code><span class="sig-paren">(</span><em>CDLposTarget</em>, <em>CDLmceFN</em>, <em>masterMceFn</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.getIndexRangeLastStroke" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.detector.plotData">
<code class="descclassname">utils.detector.</code><code class="descname">plotData</code><span class="sig-paren">(</span><em>data</em>, <em>axes</em>, <em>downsample=4</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.plotData" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.detector.plotImages">
<code class="descclassname">utils.detector.</code><code class="descname">plotImages</code><span class="sig-paren">(</span><em>data</em>, <em>axes</em>, <em>sum=None</em>, <em>cmap='viridis'</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.detector.plotImages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-utils.estimator">
<span id="utils-estimator-module"></span><h2>utils.estimator module<a class="headerlink" href="#module-utils.estimator" title="Permalink to this headline">¶</a></h2>
<p>Created on Jul 24, 2017</p>
<p>Defines two functions that are useful when dealing with the estimators.
readAndSave reads the infromation and stores it in pickle files.
openPickle opens the saved pickles.
In this way we read and generate all the useful dataframes just once, saving time.</p>
<p>&#64;author: Marc Casalprim</p>
<dl class="function">
<dt id="utils.estimator.openPickles">
<code class="descclassname">utils.estimator.</code><code class="descname">openPickles</code><span class="sig-paren">(</span><em>folder</em>, <em>openEst=True</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.estimator.openPickles" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the information relevant to the estimator and creates different dataframes. It uses <code class="docutils literal"><span class="pre">extractGyrosAndStarcam()</span></code>.
The generated dataframes are stored in pickle files.</p>
<p>columns of gyros: [‘gyroX’, ‘gyroY’, ‘gyroZ’]
columns of sc: [‘qI2G’,’qI2S’,’triggers’]
columns of est: [‘qest’,’biasX’,’biasY’,’biasZ’,’P’]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>folder</strong> – folder where the files are located</li>
<li><strong>openEst</strong> – open estimator dataframe? (if False, saves time and est will be a empty dataframe)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">gyros,sc,est</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(pandas.Dataframe,pandas.Dataframe,pandas.Dataframe)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.estimator.readAndSave">
<code class="descclassname">utils.estimator.</code><code class="descname">readAndSave</code><span class="sig-paren">(</span><em>folder</em>, <em>initial_time=1000</em>, <em>final_time=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.estimator.readAndSave" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the information relevant to the estimator and creates different dataframes. It uses <code class="docutils literal"><span class="pre">extractGyrosAndStarcam()</span></code>.
The generated dataframes are stored in pickle files.</p>
<p>columns of gyros: [‘gyroX’, ‘gyroY’, ‘gyroZ’]
columns of sc: [‘qI2G’,’qI2S’,’triggers’]
columns of est: [‘qest’,’biasX’,’biasY’,’biasZ’,’P’]</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>folder</strong> – folder where the fields are located and the files will be stored</li>
<li><strong>initial_time</strong> – mce frame number where we start</li>
<li><strong>final_time</strong> – mce frame number where we end (if None, until the end of the files)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">gyros,sc,est</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">(pandas.Dataframe,pandas.Dataframe,pandas.Dataframe)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-utils.field">
<span id="utils-field-module"></span><h2>utils.field module<a class="headerlink" href="#module-utils.field" title="Permalink to this headline">¶</a></h2>
<p>Created on 01 may 2017</p>
<p>Functions and methods useful to read the fields in an Aurora archive.</p>
<p>&#64;author: Marc Casalprim</p>
<dl class="class">
<dt id="utils.field.Field">
<em class="property">class </em><code class="descclassname">utils.field.</code><code class="descname">Field</code><span class="sig-paren">(</span><em>fieldName</em>, <em>dtype='f8'</em>, <em>indexName=None</em>, <em>indexType='i8'</em>, <em>label=None</em>, <em>conversion=1</em>, <em>function=&lt;function &lt;lambda&gt;&gt;</em>, <em>range=10000000000.0</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.field.Field" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class describing a field located in an Aurora archive.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fieldName</strong> – name of the field, the whole file name</li>
<li><strong>dtype</strong> – string describing the datatype of the field (ie. ‘f8’ is a 64 bit float)</li>
<li><strong>indexName</strong> – file name of the time index associated with this field. If None, is fieldName.rsplit(‘.’, 1)[0] + ‘.mceFrameNumber’</li>
<li><strong>indexType</strong> – string describing the datatype of the index field (ie. ‘i8’ is a 64 bit int)</li>
<li><strong>label</strong> – short name for the field.  In <code class="docutils literal"><span class="pre">utils.dataset.Dataset</span></code> it is used as the name for the dataframe columns. (if None, last word of the fieldName)</li>
<li><strong>conversion</strong> – multiplying factor of the data, useful to convert units</li>
<li><strong>function</strong> – function that will be applied to to the field data</li>
<li><strong>range</strong> – valid range of the field, any value outside +-range will be discarted. Useful to remove parsing errors.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.field.getDtypes">
<code class="descclassname">utils.field.</code><code class="descname">getDtypes</code><span class="sig-paren">(</span><em>folder</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.field.getDtypes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dtypes of all fieldNames using the format file in folder</p>
</dd></dl>

<dl class="function">
<dt id="utils.field.getFieldsContaining">
<code class="descclassname">utils.field.</code><code class="descname">getFieldsContaining</code><span class="sig-paren">(</span><em>substring</em>, <em>folder</em>, <em>indexName=None</em>, <em>dtype='f8'</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.field.getFieldsContaining" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of fields in the folder containing substring</p>
</dd></dl>

<dl class="function">
<dt id="utils.field.getFieldsRegex">
<code class="descclassname">utils.field.</code><code class="descname">getFieldsRegex</code><span class="sig-paren">(</span><em>regex</em>, <em>folder</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.field.getFieldsRegex" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of fields in the folder matching the regular expression regex</p>
</dd></dl>

<dl class="function">
<dt id="utils.field.getFormat">
<code class="descclassname">utils.field.</code><code class="descname">getFormat</code><span class="sig-paren">(</span><em>fieldName</em>, <em>folder</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.field.getFormat" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the dtype of the fieldName using the format file in folder</p>
</dd></dl>

</div>
<div class="section" id="module-utils.quat">
<span id="utils-quat-module"></span><h2>utils.quat module<a class="headerlink" href="#module-utils.quat" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Quaternion provides a class for manipulating quaternion objects.  This class provides:</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>a convenient constructor to convert to/from Euler Angles (RA,Dec,Roll) </dt>
<dd>to/from quaternions</dd>
</dl>
</li>
<li>class methods to multiply and divide quaternions</li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="utils.quat.DCM2FordAngles">
<code class="descclassname">utils.quat.</code><code class="descname">DCM2FordAngles</code><span class="sig-paren">(</span><em>matrix</em>, <em>rollArnab=0</em>, <em>prVersions=False</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.quat.DCM2FordAngles" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="utils.quat.Quat">
<em class="property">class </em><code class="descclassname">utils.quat.</code><code class="descname">Quat</code><span class="sig-paren">(</span><em>attitude</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.quat.Quat" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Quaternion class</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">Quaternion</span> <span class="k">import</span> <span class="n">Quat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span> <span class="o">=</span> <span class="n">Quat</span><span class="p">((</span><span class="mi">12</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">45</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">ra</span><span class="p">,</span> <span class="n">quat</span><span class="o">.</span><span class="n">dec</span><span class="p">,</span> <span class="n">quat</span><span class="o">.</span><span class="n">roll</span>
<span class="go">(12, 45, 45)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">quat</span><span class="o">.</span><span class="n">q</span>
<span class="go">array([ 0.38857298, -0.3146602 ,  0.23486498,  0.8335697 ])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q2</span> <span class="o">=</span> <span class="n">Quat</span><span class="p">([</span> <span class="mf">0.38857298</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.3146602</span> <span class="p">,</span>  <span class="mf">0.23486498</span><span class="p">,</span>  <span class="mf">0.8335697</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q2</span><span class="o">.</span><span class="n">ra</span>
<span class="go">11.999999315925008</span>
</pre></div>
</div>
<p>Multiplication and division operators are overloaded for the class to 
perform appropriate quaternion multiplication and division.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">q1</span> <span class="o">=</span> <span class="n">Quat</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q2</span> <span class="o">=</span> <span class="n">Quat</span><span class="p">((</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q1</span> <span class="o">/</span> <span class="n">q2</span>
</pre></div>
</div>
<p>Performs the operation as q1 * inverse q2</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">q1</span> <span class="o">=</span> <span class="n">Quat</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q2</span> <span class="o">=</span> <span class="n">Quat</span><span class="p">((</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">q1</span> <span class="o">*</span> <span class="n">q2</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>attitude</strong> – initialization attitude for quat <code class="docutils literal"><span class="pre">attitude</span></code> may be:</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>another Quat</li>
<li>a 4 element array (expects x,y,z,w quat form)</li>
<li>a 3 element array (expects ra,dec,roll in degrees)</li>
<li>a 3x3 transform/rotation matrix</li>
</ul>
<dl class="attribute">
<dt id="utils.quat.Quat.dec">
<code class="descname">dec</code><a class="headerlink" href="#utils.quat.Quat.dec" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve Dec term from equatorial system in degrees</p>
</dd></dl>

<dl class="attribute">
<dt id="utils.quat.Quat.equatorial">
<code class="descname">equatorial</code><a class="headerlink" href="#utils.quat.Quat.equatorial" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve [RA, Dec, Roll]
:rtype: numpy array</p>
</dd></dl>

<dl class="method">
<dt id="utils.quat.Quat.inv">
<code class="descname">inv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#utils.quat.Quat.inv" title="Permalink to this definition">¶</a></dt>
<dd><p>Invert the quaternion</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">inverted quaternion</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#utils.quat.Quat" title="utils.quat.Quat">Quat</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="utils.quat.Quat.normalize">
<code class="descname">normalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#utils.quat.Quat.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize the quaternion</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">normalized quaternion</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#utils.quat.Quat" title="utils.quat.Quat">Quat</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="utils.quat.Quat.q">
<code class="descname">q</code><a class="headerlink" href="#utils.quat.Quat.q" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve 4-vector of quaternion elements in [x, y, z, w] form</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="utils.quat.Quat.ra">
<code class="descname">ra</code><a class="headerlink" href="#utils.quat.Quat.ra" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve RA term from equatorial system in degrees</p>
</dd></dl>

<dl class="attribute">
<dt id="utils.quat.Quat.roll">
<code class="descname">roll</code><a class="headerlink" href="#utils.quat.Quat.roll" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve Roll term from equatorial system in degrees</p>
</dd></dl>

<dl class="attribute">
<dt id="utils.quat.Quat.transform">
<code class="descname">transform</code><a class="headerlink" href="#utils.quat.Quat.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve the value of the 3x3 rotation/transform matrix
:returns: 3x3 rotation/transform matrix
:rtype: numpy array</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="utils.quat.cost">
<code class="descclassname">utils.quat.</code><code class="descname">cost</code><span class="sig-paren">(</span><em>x</em>, <em>q</em>, <em>order</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.quat.cost" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="utils.quat.getAngles">
<code class="descclassname">utils.quat.</code><code class="descname">getAngles</code><span class="sig-paren">(</span><em>q</em>, <em>order='YPR'</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.quat.getAngles" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the three angles (Yaw,-Pitch,Roll) that describe the quaternion <code class="docutils literal"><span class="pre">q</span></code> applied in the defined multiplication order</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">q</span> <span class="o">=</span> <span class="n">Quat</span><span class="p">((</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">40</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angles</span><span class="o">=</span><span class="n">getAngles</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="s1">&#39;YPR&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span> <span class="n">angles</span>
<span class="go">[ 34.72446346   8.05229897  47.93141757]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="o">=</span><span class="n">Quat</span><span class="p">((</span><span class="n">angles</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span><span class="o">=</span><span class="n">Quat</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="n">angles</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">0</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span><span class="o">=</span><span class="n">Quat</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">angles</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span><span class="o">*</span><span class="n">P</span><span class="o">*</span><span class="n">R</span>
<span class="go">[ 20.0000036   30.00002361  40.00001084]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>q</strong> – a utils.quat.Quat object</li>
<li><strong>order</strong> – desired multiplication order (ie. ‘RPY’ is R*P*Y)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">3-dimensional np.array, [Yaw,-Pitch,Roll] angles in degrees</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.quat.normalize">
<code class="descclassname">utils.quat.</code><code class="descname">normalize</code><span class="sig-paren">(</span><em>array</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.quat.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize a 4 element array/list/numpy.array for use as a quaternion</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>quat_array</strong> – 4 element list/array</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">normalized array</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">numpy array</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="utils.quat.vec2skew">
<code class="descclassname">utils.quat.</code><code class="descname">vec2skew</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.quat.vec2skew" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the skew-symmetric matrix <img class="math" src="../_images/math/30226b3818151c41ac041983515f7df9d4c0f002.png" alt="\lfloor{\bm{v}_\times}\rfloor"/> related to the vector <code class="docutils literal"><span class="pre">v</span></code></p>
<div class="math">
<p><img src="../_images/math/648d7200272b50dd0eb2e020d335cbd87c30e0d7.png" alt="&amp;\lfloor{\bm{v}_\times}\rfloor=\begin{bmatrix}  0     &amp;   v_3   &amp;  -v_2   \\
                                                 -v_3   &amp;   0     &amp;   v_1   \\
                                                  v_2   &amp;  -v_1   &amp;   0  \\\end{bmatrix}
\ ,\ \bm{v}\times\bm{u}=\lfloor{\bm{v}_\times}\rfloor\bm{u}"/></p>
</div><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>v</strong> – a 3-dimensional vector</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a skew-symmetric matrix</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">3x3 np.matrix</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-utils.thermometers">
<span id="utils-thermometers-module"></span><h2>utils.thermometers module<a class="headerlink" href="#module-utils.thermometers" title="Permalink to this headline">¶</a></h2>
<p>Created on :’Jul 10, 2017</p>
<p>&#64;author: Marc Casalprim</p>
<dl class="function">
<dt id="utils.thermometers.getTemperaturesFromRawDataFrame">
<code class="descclassname">utils.thermometers.</code><code class="descname">getTemperaturesFromRawDataFrame</code><span class="sig-paren">(</span><em>rawdf</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.thermometers.getTemperaturesFromRawDataFrame" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new dataframe with the calculated temperatures.
Raw DataFrame format: all columns from Standard message start with “std_”</p>
</dd></dl>

<dl class="function">
<dt id="utils.thermometers.unwrapCounter">
<code class="descclassname">utils.thermometers.</code><code class="descname">unwrapCounter</code><span class="sig-paren">(</span><em>counter</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.thermometers.unwrapCounter" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the evolution of the counter but unwrapping modulo 255</p>
</dd></dl>

</div>
<div class="section" id="module-utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-utils" title="Permalink to this headline">¶</a></h2>
<p>This package contains functions and Classes that are useful to process and plot the data from the Aurora archives.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/bettii_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">utils package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-utils.calibrator">utils.calibrator module</a></li>
<li><a class="reference internal" href="#module-utils.config">utils.config module</a></li>
<li><a class="reference internal" href="#module-utils.dataset">utils.dataset module</a></li>
<li><a class="reference internal" href="#module-utils.detector">utils.detector module</a></li>
<li><a class="reference internal" href="#module-utils.estimator">utils.estimator module</a></li>
<li><a class="reference internal" href="#module-utils.field">utils.field module</a></li>
<li><a class="reference internal" href="#module-utils.quat">utils.quat module</a></li>
<li><a class="reference internal" href="#module-utils.thermometers">utils.thermometers module</a></li>
<li><a class="reference internal" href="#module-utils">Module contents</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tests.html"
                        title="previous chapter">tests package</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/apidoc/utils.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="tests.html" title="tests package"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Python Flight Data Processing 0.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="modules.html" >src</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, Marc Casalprim.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.3.
    </div>
  </body>
</html>